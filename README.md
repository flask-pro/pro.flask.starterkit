# pro.flask.starterkit
Шаблон для старта проекта на Flask.

Шаблон предлагает придерживаться принципов TDD ([Разработка через тестирование](https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5))

## Применение
*  Быстрый старт проекта.
*  Разработка бекенда с реализацией REST API.
*  Разработка движка сайта.

## Зависимости
* Python 3.8
* make
* docker
* docker-compose

## Как пользоваться
1. Клонировать репозиторий.
2. Скопировать содержимое проекта в свой проект.
3. Установить виртуальное окружение командой `make create_venv`
4. Написать тест для нового функционала.
5. Добавить новый функционал.
6. Запустить тесты.
7. При необходимости запустить проект.

## Запуск проекта
Проект может быть запущен следующими способами:
2. `make run`
3. `make run_test_instance`

## Запуск тестов
Тесты могут быть запущены следующими способами:
1. Раннером тестов IDE.
2. `make test`

`make test` также подсчитывает покрытие кода тестами.

## REST API
Реализуется принцип "сначала спецификация", для этого используется модуль connexion. В проект добавлена спецификация в формате OpenAPI 3.

## Служебные эндпоинты
* `GET /index` - маршрутная функция для формирования главной страницы. Используется шаблонизатор Jinja2.
* `GET /check` - проверка работоспособности приложения, при вызове данного эндпоинта проверяется работоспособность базы данных и приложения в целом.
* `GET /collapse` - вызывает исключение для проверки работы системы обработки ошибок.

## Что внутри?
* Запуск различных инструментов необходимых в процессе разработки производится с помощью [Makefile](https://ru.wikipedia.org/wiki/Makefile).
* Тестирование производится с использованием фреймворка `pytest`.
* Прямая работа с исходным кодом. Возможно использование дебаггера раннера тестов интегрированного в IDE.
* Паттерн фабрика для инициализации приложения.
* При тестировании автоматически запускается БД в контейнере.
* MVC.
* Толстые контроллеры.
* Конфигурация в классах.
* Обработка ошибок двумя методами, перехватом общих исключений и вызов конкретных номерных ошибок соответствующих http-кодам.
* Запуск проекта в контейнерах для формирования stage-релиза.
* Раздельное размещение маршрутных функций для API (используется connexion для инициализации) и маршрутных функций выдачи страниц (через Blueprints).
* Полнотекстовый поиск через Elasticsearch.

## Дополнительные ресурсы
* [Python](https://docs.python.org/3/)
* [Docker](https://docs.docker.com/)
* [Docker-compose](https://docs.docker.com/compose/)
* [OpenAPI](https://swagger.io/docs/specification/about/)
* [Connexion](https://connexion.readthedocs.io/en/latest/index.html)
* [Flask](https://flask.palletsprojects.com/en/1.1.x/)
* [SQLAlchemy](https://docs.sqlalchemy.org/en/13/)
* [Pytest](https://docs.pytest.org/en/stable/contents.html)
* [PostgreSQL](https://postgrespro.ru/docs/postgresql/12/index)
* [Jinja2](https://jinja.palletsprojects.com/en/2.11.x/)
